{"link":"6305957","name":"Дамп базы данных сообщений форума Sql.ru 1 0 x86 x64 [2022, RUS]","date":"06-Янв-23 13:42","author":"VSX2","description":"\nДамп базы данных сообщений форума Sql.ruГод/Дата Выпуска: 2022\nВерсия: 1 Build 0\nРазработчик: Murcode\nСайт разработчика: murcode.ruРазрядность: 32bit, 64bit\nЯзык интерфейса: Русский\nТаблэтка: не требуется\nСистемные требования: Любая ОС\nОписание: Для проекта MurCode была подготовлена база данных сообщений, которую собирали пользователи форума ранее существовавшего Sql.Ru более 20 лет.\n* Дамп не является точной копией дампа движка оригинального форума. Значимые таблицы с данными: Forum, Topic, Message.\n* Таблица Users получена путём агрегации выборки\n* Таблицы %FTS% являются службными для полнотекстового поиска версии FTS5. При необходимости они могут быть удалены, удалив соответствующую виртуальную таблицу.Схема базы данных, индексов и запросы для обновления FTS\n\nскрытый текст\n\n\nКод:\n\nCREATE TABLE Forum (id integer PRIMARY KEY ASC, forum_name text, group_name text);CREATE TABLE Topic(\n  id integer PRIMARY KEY ASC,\n  forum_id integer,\n  topic_name text,\n  user_name text,\n  user_id integer);CREATE TABLE Message(\n  id integer PRIMARY KEY ASC,\n  topic_id integer,\n  date_created datetime,\n  user_name text,\n  user_id integer,\n  message_text text);CREATE UNIQUE INDEX idx_topic_fid_id\nON Topic(\n  forum_id,\n  id);CREATE INDEX idx_message_tid ON Message(topic_id);CREATE INDEX idx_message_tid_date_created\nON Message(\n  topic_id,\n  date_created);-- Временно в качестве Primary\nCREATE UNIQUE INDEX idx_forum_id ON Forum(id);\nCREATE UNIQUE INDEX idx_topic_id ON Topic(id);\nCREATE UNIQUE INDEX idx_message_id ON Message(id);-- Для сообщений\n-- Настройка FTS5, создаём таблицу. Т.к. создаётся content-таблица, то это экономит место, в FTS таблицу не добавляется дубликат контента, а только лишь добавляется индекс в приватную таблицу.\n-- Но нужные триггеры, которые будут удалять из приватной таблицы индексыCREATE VIRTUAL TABLE MessageFts USING fts5(\n    content='message',\n    content_rowid='id',\n    id UNINDEXED,\n    message_text,\n    user_name\n);-- Добавляем триггеры для обновления индексаCREATE TRIGGER tr_message_after_insert AFTER INSERT ON Message\nBEGIN\n    INSERT INTO MessageFts(rowid, id, message_text, user_name)\n        VALUES (new.id, new.id, new.message_text, new.user_name);\nEND;CREATE TRIGGER tr_message_after_delete AFTER DELETE ON Message\nBEGIN\n    INSERT INTO MessageFts(MessageFts, rowid, id, message_text, user_name)\n        VALUES ('delete', old.id, old.id, old.message_text, old.user_name);\nEND;CREATE TRIGGER tr_message_after_update AFTER UPDATE ON Message\nBEGIN\n    INSERT INTO MessageFts(MessageFts, rowid, id, message_text, user_name)\n        VALUES ('delete', old.id, old.id, old.message_text, old.user_name);    INSERT INTO MessageFts(rowid, id, message_text, user_name)\n        VALUES (new.id, new.id, new.message_text, new.user_name);\nEND;-- Для топиковCREATE VIRTUAL TABLE TopicFts USING fts5(\n    content='topic',\n    content_rowid='id',\n    id UNINDEXED,\n    topic_name,\n    user_name\n);-- Добавляем триггеры для обновления индексаCREATE TRIGGER tr_topic_after_insert AFTER INSERT ON Topic\nBEGIN\n    INSERT INTO TopicFts(rowid, id, topic_name, user_name)\n        VALUES (new.id, new.id, new.topic_name, new.user_name);\nEND;CREATE TRIGGER tr_topic_after_delete AFTER DELETE ON Topic\nBEGIN\n    INSERT INTO TopicFts(TopicFts, rowid, id, topic_name, user_name)\n        VALUES ('delete', old.id, old.id, old.topic_name, old.user_name);\nEND;CREATE TRIGGER tr_topic_after_update AFTER UPDATE ON Topic\nBEGIN\n    INSERT INTO TopicFts(TopicFts, rowid, id, topic_name, user_name)\n        VALUES ('delete', old.id, old.id, old.topic_name, old.user_name);    INSERT INTO TopicFts(rowid, id, topic_name, user_name)\n        VALUES (new.id, new.id, new.topic_name, new.user_name);\nEND;-- Обновляем индексы по существующим строкам\nINSERT INTO MessageFts(MessageFts) VALUES('rebuild');-- Проверить индекс, согласовывает содержимое с внешней таблицей (запрос с rank=1)\nINSERT INTO MessageFts(MessageFts) VALUES('integrity-check');\nINSERT INTO MessageFts(MessageFts, rank) VALUES('integrity-check', 0);\nINSERT INTO MessageFts(MessageFts, rank) VALUES('integrity-check', 1);-- Автослияние B-индексов в единой дерево. 8 - значение если редки обновления и удаления, 2 - если частые\nINSERT INTO MessageFts(MessageFts, rank) VALUES('automerge', 8);\nINSERT INTO TopicFts(TopicFts, rank) VALUES('automerge', 8);\n\n\n\nДоп. информация: Для работы требуется наличие любого клиента для СУБД SQLite v3\n\nСкриншоты\n\n\n\n\n\n\nСкриншоты окна About\n\n\n  \n Набор в группу «Хранители» - Помогите сохранить редкие раздачи  ","magnet_link":"magnet:?xt=urn:btih:323CBAC2059A81A50FA154138CF73183CA0D2BC1&tr=http%3A%2F%2Fbt4.t-ru.org%2Fann%3Fmagnet&dn=%D0%94%D0%B0%D0%BC%D0%BF%20%D0%B1%D0%B0%D0%B7%D1%8B%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B5%D0%BD%D0%B8%D0%B9%20%D1%84%D0%BE%D1%80%D1%83%D0%BC%D0%B0%20Sql.ru%201%200%20x86%20x64%20%5B2022%2C%20RUS%5D","torrent_link":"dl.php?t=6305957","thanked_list":[{"id":"17523958","name":"Michael_Isaev ","data":"(28-Июн-23)"},{"id":"37965634","name":"DormidontLoewe ","data":"(07-Май-23)"},{"id":"1297318","name":"vladyslav2522 ","data":"(04-Май-23)"},{"id":"2795385","name":"rulya2 ","data":"(29-Апр-23)"},{"id":"9641697","name":"Magallanes ","data":"(13-Апр-23)"},{"id":"17420880","name":"imperterrito ","data":"(27-Мар-23)"},{"id":"15461315","name":"ksb.tlt1 ","data":"(17-Мар-23)"},{"id":"15798011","name":"forus33 ","data":"(03-Фев-23)"},{"id":"32706092","name":"Неиллюззорный холокост ","data":"(03-Фев-23)"},{"id":"18784705","name":"Bujazlig ","data":"(08-Янв-23)"}]}